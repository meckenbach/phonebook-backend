(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(17),r=t.n(c),u=t(7),a=t(3),o=t(2),i=t(5),s=t.n(i),l="/api/persons",d={getAll:function(){return s.a.get(l).then((function(e){return e.data}))},create:function(e){return s.a.post(l,e).then((function(e){return e.data}))},update:function(e,n){return s.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},del:function(e){return s.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))}},j=t(0),b=function(e){var n=e.onFilterInput,t=e.filterValue;return Object(j.jsxs)("div",{children:["filter shown with ",Object(j.jsx)("input",{onChange:n,value:t})]})},f=function(e){var n=e.onNameInput,t=e.onNumberInput,c=e.onAddPerson,r=e.nameValue,u=e.numberValue;return Object(j.jsxs)("form",{children:[Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{onChange:n,value:r})]}),Object(j.jsxs)("div",{children:["number: ",Object(j.jsx)("input",{onChange:t,value:u})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{onClick:c,type:"submit",children:"add"})})]})},h=function(e){var n=e.persons,t=e.filter,c=e.onDeletePerson;return n=n.filter((function(e){return e.name.startsWith(t)})).map((function(e){return Object(j.jsx)(m,{name:e.name,number:e.number,id:e.id,onDeletePerson:c},e.id)})),Object(j.jsx)("div",{children:n})},m=function(e){var n=e.name,t=e.number,c=e.id,r=e.onDeletePerson;return Object(j.jsxs)("div",{children:[n,"\xa0",t," ",Object(j.jsx)("button",{onClick:r(c,n),children:"delete"})]})},O=function(e){var n=e.message;return null===n?null:Object(j.jsx)("div",{className:"success",children:n})},v=function(e){var n=e.message;return null===n?null:Object(j.jsx)("div",{className:"error",children:n})},p=function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1];Object(o.useEffect)((function(){d.getAll().then((function(e){c(e)}))}),[]);var r=Object(o.useState)(""),i=Object(a.a)(r,2),s=i[0],l=i[1];var m=Object(o.useState)(""),p=Object(a.a)(m,2),x=p[0],g=p[1];var w=Object(o.useState)(""),D=Object(a.a)(w,2),k=D[0],I=D[1];var N=Object(o.useState)(null),P=Object(a.a)(N,2),S=P[0],V=P[1],A=Object(o.useState)(null),C=Object(a.a)(A,2),y=C[0],T=C[1];return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(O,{message:S}),Object(j.jsx)(v,{message:y}),Object(j.jsx)(b,{onFilterInput:function(e){e.preventDefault(),I(e.target.value)},filterValue:k}),Object(j.jsx)("h3",{children:"add a new"}),Object(j.jsx)(f,{onNameInput:function(e){e.preventDefault(),l(e.target.value)},nameValue:s,onNumberInput:function(e){e.preventDefault(),g(e.target.value)},numberValue:x,onAddPerson:function(e){e.preventDefault();var n={name:s,number:x},r=t.find((function(e){return e.name===s}));r?window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))&&d.update(r.id,n).then((function(e){c([].concat(Object(u.a)(t.filter((function(e){return e.name!==r.name}))),[e])),l(""),g(""),V("Updated ".concat(s)),setTimeout((function(){V(null)}),3e3)})).catch((function(e){T("Information of ".concat(s," has already been removed from server")),setTimeout((function(){T(null)}),3e3)})):d.create(n).then((function(e){c([].concat(Object(u.a)(t),[e])),l(""),g(""),V("Added ".concat(s)),setTimeout((function(){V(null)}),3e3)}))}}),Object(j.jsx)("h3",{children:"Numbers"}),Object(j.jsx)(h,{persons:t,filter:k,onDeletePerson:function(e,n){return function(r){r.preventDefault(),window.confirm("Delete ".concat(n,"?"))&&d.del(e).then((function(){c(Object(u.a)(t.filter((function(n){return n.id!==e}))))}))}}})]})};t(41);r.a.render(Object(j.jsx)(p,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.c457231c.chunk.js.map